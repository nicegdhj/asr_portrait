### 
# ===========================================
# Portrait 用户画像服务 - 环境配置
# 复制此文件为 .env 并填入实际配置
# ===========================================

# 应用配置
APP_NAME=portrait
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# API 配置
API_HOST=0.0.0.0
API_PORT=8001
API_PREFIX=/api/v1

# ===========================================
# 数据库配置
# ===========================================

# PostgreSQL (画像存储 - 读写)
# 本地开发可使用 Docker: docker compose -f docker/docker-compose.yml up -d postgres
POSTGRES_HOST=portrait-postgres  #localhost
POSTGRES_PORT=5432
POSTGRES_USER=portrait
POSTGRES_PASSWORD=portrait123
POSTGRES_DB=portrait

# MySQL (智能外呼源数据 - 只读)
# 注意: 源数据库通常在线上环境，本地开发时可能无法连接
# MYSQL_HOST=portrait-test-mysql #线上mysql的ip
# MYSQL_PORT=3306
# MYSQL_USER=root
# MYSQL_PASSWORD=root123
# MYSQL_DB=outbound_saas

MYSQL_HOST=188.107.245.36
MYSQL_PORT=3306
MYSQL_USER=root  # 或创建一个只读账户
MYSQL_PASSWORD=rootpass
MYSQL_DB=saas_bdb07bac-d573-4289-b8ff-39029f057bfb

# 源数据库表后缀（源系统未严格按月分表，所有数据都在 2025_11 表中）
# 如果源系统后续调整了分表策略，可删除此配置恢复自动计算
SOURCE_TABLE_SUFFIX=2025_11


# ===========================================
# LLM 配置
# ===========================================

# 开发环境: 通义千问 API
LLM_PROVIDER=qwen
LLM_API_KEY=""
LLM_API_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
LLM_MODEL=qwen-max
LLM_BATCH_SIZE=50
LLM_MAX_CONCURRENT=5
LLM_TIMEOUT=60

# 生产环境: 网关模式 (设置为 true 时使用网关)
LLM_GATEWAY_MODE=false
# 生产网关配置示例:
# LLM_API_BASE_URL=http://188.103.147.179:30175/gateway/api/bMWPmH
# LLM_MODEL=Qwen2-72B-Instruct
# LLM_GATEWAY_AUTH_HEADER=sk-a2b25448-f74f-4c2f-a855-aed8e4251d01

# ===========================================
# 定时任务配置
# ===========================================
SCHEDULER_ENABLED=true
SCHEDULER_TIMEZONE=Asia/Shanghai

# 每日同步任务执行时间 (凌晨2点)
SYNC_CRON_HOUR=2
SYNC_CRON_MINUTE=0

WEB_PORT=8083