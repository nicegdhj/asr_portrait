# æ™ºèƒ½å¤–å‘¼ç”¨æˆ·ç”»åƒç³»ç»Ÿ

> åŸºäºæ™ºèƒ½å¤–å‘¼é€šè¯æ•°æ®çš„å®¢æˆ·ç”»åƒåˆ†æå¹³å°,æ”¯æŒæ»¡æ„åº¦ã€æƒ…æ„Ÿã€é£é™©ã€æ²Ÿé€šæ„æ„¿å››ç»´åº¦ç”»åƒåˆ†æ

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.100+-green.svg)](https://fastapi.tiangolo.com/)
[![Vue](https://img.shields.io/badge/Vue-3.0+-brightgreen.svg)](https://vuejs.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## ç›®å½•

- [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [æ•°æ®å…³ç³»](#æ•°æ®å…³ç³»)
- [ç”»åƒè®¡ç®—å£å¾„](#ç”»åƒè®¡ç®—å£å¾„)
- [åç«¯è¯´æ˜](#åç«¯è¯´æ˜)
- [å‰ç«¯è¯´æ˜](#å‰ç«¯è¯´æ˜)
- [éƒ¨ç½²ä¸å¯åŠ¨](#éƒ¨ç½²ä¸å¯åŠ¨)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

---

## ç³»ç»Ÿæ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯

æœ¬ç³»ç»Ÿæ˜¯æ™ºèƒ½å¤–å‘¼å¹³å°çš„ç”¨æˆ·ç”»åƒå­ç³»ç»Ÿï¼Œé€šè¿‡å¯¹å¤–å‘¼é€šè¯è®°å½•çš„æ¸…æ´—ã€åˆ†æå’Œèšåˆï¼Œæ„å»ºå®¢æˆ·çš„å¤šç»´åº¦ç”»åƒï¼Œå¸®åŠ©è¿è¥äººå‘˜äº†è§£å®¢æˆ·çŠ¶æ€ã€è¯†åˆ«é£é™©å®¢æˆ·ã€ä¼˜åŒ–å¤–å‘¼ç­–ç•¥ã€‚

### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | æè¿° |
|---------|------|
| **æ•°æ®åŒæ­¥** | ä»çº¿ä¸Š MySQL åŒæ­¥é€šè¯è®°å½•åˆ°ç”»åƒæ•°æ®åº“ |
| **è§„åˆ™å¼•æ“åˆ†æ** | åŸºäº ASR æ–‡æœ¬è¿›è¡Œæ»¡æ„åº¦/æƒ…æ„Ÿ/é£é™©åˆ†æ |
| **ç”»åƒèšåˆ** | æŒ‰å®¢æˆ·+åœºæ™¯+å‘¨æœŸèšåˆè®¡ç®—ç”»åƒå¿«ç…§ |
| **ç»Ÿè®¡å±•ç¤º** | 4ç»´åº¦åˆ†å¸ƒå›¾è¡¨ + è¶‹åŠ¿åˆ†æ + æ˜ç»†åˆ—è¡¨ |

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯é€‰å‹ |
|------|---------|
| **åç«¯æ¡†æ¶** | FastAPI + SQLAlchemy 2.0 (async) |
| **æ•°æ®åº“** | PostgreSQL (ç”»åƒåº“) + MySQL (æºæ•°æ®åº“, åªè¯») |
| **å‰ç«¯æ¡†æ¶** | Vue 3 + TypeScript + Vite |
| **UI ç»„ä»¶** | Element Plus + ECharts |
| **å®¹å™¨åŒ–** | Docker + Docker Compose |

---

## æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ™ºèƒ½å¤–å‘¼ç”¨æˆ·ç”»åƒç³»ç»Ÿ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      ETL åŒæ­¥         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚              â”‚                       â”‚
â”‚   â”‚  MySQL æºåº“   â”‚   sync_call_records   â”‚  PostgreSQL  â”‚                       â”‚
â”‚   â”‚ (çº¿ä¸Šä¸šåŠ¡æ•°æ®) â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  (ç”»åƒæ•°æ®)   â”‚                       â”‚
â”‚   â”‚              â”‚   get_asr_details     â”‚              â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚         â”‚                                       â”‚                               â”‚
â”‚         â”‚ é€šè¯è®°å½•                              â”‚ ç”»åƒå¿«ç…§                        â”‚
â”‚         â”‚ ASR æ˜ç»†                              â”‚ åœºæ™¯æ±‡æ€»                        â”‚
â”‚         â”‚                                       â”‚                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚                        åç«¯æœåŠ¡ (FastAPI)                       â”‚            â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚   â”‚                                                               â”‚            â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚            â”‚
â”‚   â”‚  â”‚ ETL Service â”‚  â”‚Rule Engine  â”‚  â”‚ Portrait    â”‚           â”‚            â”‚
â”‚   â”‚  â”‚             â”‚  â”‚ Service     â”‚  â”‚ Service     â”‚           â”‚            â”‚
â”‚   â”‚  â”‚ - æ•°æ®åŒæ­¥   â”‚  â”‚ - æ»¡æ„åº¦åˆ†æâ”‚  â”‚ - å¿«ç…§èšåˆ  â”‚           â”‚            â”‚
â”‚   â”‚  â”‚ - ASR è·å–  â”‚  â”‚ - æƒ…æ„Ÿåˆ†æ  â”‚  â”‚ - åœºæ™¯æ±‡æ€»  â”‚           â”‚            â”‚
â”‚   â”‚  â”‚             â”‚  â”‚ - é£é™©åˆ†æ  â”‚  â”‚ - è¶‹åŠ¿è®¡ç®—  â”‚           â”‚            â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚            â”‚
â”‚   â”‚                                                               â”‚            â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚
â”‚   â”‚  â”‚                     REST API                            â”‚  â”‚            â”‚
â”‚   â”‚  â”‚  /task         /task/{id}/summary    /task/{id}/trend   â”‚  â”‚            â”‚
â”‚   â”‚  â”‚  /task/periods /task/{id}/customers  /admin/*           â”‚  â”‚            â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                       â”‚                                         â”‚
â”‚                                       â”‚ HTTP API                                â”‚
â”‚                                       â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚                       å‰ç«¯åº”ç”¨ (Vue 3)                         â”‚            â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚            â”‚
â”‚   â”‚  â”‚ ç»Ÿè®¡æ¦‚è§ˆ  â”‚ â”‚ 4ç»´åº¦åˆ†å¸ƒ â”‚ â”‚ è¶‹åŠ¿å›¾è¡¨ â”‚ â”‚   æ˜ç»†åˆ—è¡¨       â”‚ â”‚            â”‚
â”‚   â”‚  â”‚ å®¢æˆ·/é€šè¯â”‚ â”‚  é¥¼å›¾Ã—4  â”‚ â”‚ æŠ˜çº¿å›¾   â”‚ â”‚  ç­›é€‰/åˆ†é¡µ/æœç´¢  â”‚ â”‚            â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœåŠ¡è°ƒç”¨å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ•°æ®å¤„ç†æµç¨‹                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   1. ETL æ•°æ®åŒæ­¥                                                               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚   MySQL      â”‚ â”€â”€â–º â”‚  ETL Service â”‚ â”€â”€â–º â”‚ PostgreSQL   â”‚                   â”‚
â”‚   â”‚ call_record  â”‚     â”‚              â”‚     â”‚ call_record  â”‚                   â”‚
â”‚   â”‚ _2025_11     â”‚     â”‚ sync_call_   â”‚     â”‚ _enriched    â”‚                   â”‚
â”‚   â”‚              â”‚     â”‚ records()    â”‚     â”‚              â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                               â”‚                                                 â”‚
â”‚                               â–¼                                                 â”‚
â”‚   2. ASR åˆ†æ                                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚   MySQL      â”‚ â”€â”€â–º â”‚  ETL Service â”‚ â”€â”€â–º â”‚  Rule Engine â”‚                   â”‚
â”‚   â”‚ call_record  â”‚     â”‚              â”‚     â”‚              â”‚                   â”‚
â”‚   â”‚ _detail      â”‚     â”‚ batch_fetch_ â”‚     â”‚ analyze_call â”‚                   â”‚
â”‚   â”‚              â”‚     â”‚ asr_details()â”‚     â”‚ ()           â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                     â”‚                           â”‚
â”‚                                                     â–¼                           â”‚
â”‚                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                                            â”‚ PostgreSQL   â”‚                    â”‚
â”‚                                            â”‚ call_record  â”‚                    â”‚
â”‚                                            â”‚ _enriched    â”‚                    â”‚
â”‚                                            â”‚ (æ›´æ–°åˆ†æå­—æ®µ)â”‚                    â”‚
â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                     â”‚                           â”‚
â”‚                                                     â–¼                           â”‚
â”‚   3. ç”»åƒèšåˆ                                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ call_record  â”‚ â”€â”€â–º â”‚  Portrait    â”‚ â”€â”€â–º â”‚ user_portraitâ”‚                   â”‚
â”‚   â”‚ _enriched    â”‚     â”‚  Service     â”‚     â”‚ _snapshot    â”‚                   â”‚
â”‚   â”‚              â”‚     â”‚              â”‚     â”‚              â”‚                   â”‚
â”‚   â”‚              â”‚     â”‚ compute_     â”‚     â”‚ (æŒ‰customer+ â”‚                   â”‚
â”‚   â”‚              â”‚     â”‚ snapshot()   â”‚     â”‚ task+period) â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                               â”‚                                                 â”‚
â”‚                               â–¼                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚   â”‚ user_portraitâ”‚ â”€â”€â–º â”‚ task_portraitâ”‚                                        â”‚
â”‚   â”‚ _snapshot    â”‚     â”‚ _summary     â”‚                                        â”‚
â”‚   â”‚              â”‚     â”‚              â”‚                                        â”‚
â”‚   â”‚              â”‚     â”‚ (æŒ‰task+     â”‚                                        â”‚
â”‚   â”‚              â”‚     â”‚  period)     â”‚                                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ•°æ®å…³ç³»

### ER å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MySQL æºæ•°æ®åº“ (outbound_saas)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚   autodialer_task   â”‚  ä»»åŠ¡/åœºæ™¯è¡¨                                          â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                       â”‚
â”‚   â”‚ PK: uuid (char 36)  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚     name            â”‚  åœºæ™¯åç§°                      â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚ 1:N                   â”‚
â”‚                                                          â”‚                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚                       â”‚
â”‚   â”‚ autodialer_call_record_2025_11   â”‚  é€šè¯è®°å½•è¡¨ (æŒ‰æœˆåˆ†è¡¨)                    â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                       â”‚
â”‚   â”‚ PK: id (char 36)                 â”‚                  â”‚                       â”‚
â”‚   â”‚ FK: task_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚   â”‚     customer_id â˜… ç”»åƒä¸»ä½“       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚     callee (æ‰‹æœºå·)              â”‚                  â”‚                       â”‚
â”‚   â”‚     callid (é€šè¯å”¯ä¸€ID)          â”‚                  â”‚ 1:N                   â”‚
â”‚   â”‚     calldate, duration, bill     â”‚                  â”‚                       â”‚
â”‚   â”‚     rounds, hangup_disposition   â”‚                  â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚                       â”‚
â”‚                                                          â”‚                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                       â”‚
â”‚   â”‚ autodialer_call_record_detail_2025_11    â”‚  ASR æ˜ç»†è¡¨                      â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚                       â”‚
â”‚   â”‚ PK: id                                   â”‚          â”‚                       â”‚
â”‚   â”‚ FK: record_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚   â”‚     callid                               â”‚                                  â”‚
â”‚   â”‚     notify â˜… ç­›é€‰æ¡ä»¶                    â”‚  'asrmessage_notify' = æœ‰æ•ˆäº¤äº’  â”‚
â”‚   â”‚     sequence (å¯¹è¯åºå·)                  â”‚                                  â”‚
â”‚   â”‚     question â˜… ç”¨æˆ·è¯´çš„è¯                â”‚                                  â”‚
â”‚   â”‚     answer_text (ASR æ ‡ç­¾)               â”‚                                  â”‚
â”‚   â”‚     answer_content (æœºå™¨äººå›å¤)          â”‚                                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â”‚
                                    â”‚ ETL åŒæ­¥
                                    â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PostgreSQL ç”»åƒæ•°æ®åº“ (portrait)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚   â”‚    period_registry        â”‚  å‘¨æœŸæ³¨å†Œè¡¨                                      â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                 â”‚
â”‚   â”‚ period_type: week/month   â”‚                                                 â”‚
â”‚   â”‚ period_key: 2025-W48      â”‚                                                 â”‚
â”‚   â”‚ status: completed         â”‚                                                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚   â”‚      call_record_enriched         â”‚  å¢å¼ºé€šè¯è®°å½• (æ˜ç»†å±‚)                   â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                         â”‚
â”‚   â”‚ callid                            â”‚  â† MySQL call_record.callid            â”‚
â”‚   â”‚ task_id                           â”‚  â† MySQL call_record.task_id           â”‚
â”‚   â”‚ user_id â˜… customer_id             â”‚  â† MySQL call_record.customer_id       â”‚
â”‚   â”‚ phone                             â”‚  â† MySQL call_record.callee            â”‚
â”‚   â”‚ call_date, bill, rounds           â”‚                                         â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚                                         â”‚
â”‚   â”‚ satisfaction â˜… æ»¡æ„åº¦              â”‚  â† è§„åˆ™å¼•æ“åˆ†æ                         â”‚
â”‚   â”‚ sentiment â˜… æƒ…æ„Ÿ                   â”‚  â† è§„åˆ™å¼•æ“åˆ†æ                         â”‚
â”‚   â”‚ complaint_risk â˜… æŠ•è¯‰é£é™©          â”‚  â† è§„åˆ™å¼•æ“åˆ†æ                         â”‚
â”‚   â”‚ churn_risk â˜… æµå¤±é£é™©              â”‚  â† è§„åˆ™å¼•æ“åˆ†æ                         â”‚
â”‚   â”‚ willingness â˜… æ²Ÿé€šæ„æ„¿             â”‚  â† è§„åˆ™å¼•æ“åˆ†æ                         â”‚
â”‚   â”‚ risk_level â˜… ç»¼åˆé£é™©              â”‚  â† è§„åˆ™å¼•æ“åˆ†æ                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                    â”‚ GROUP BY customer_id, task_id, period                      â”‚
â”‚                    â–¼                                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚   â”‚    user_portrait_snapshot         â”‚  ç”¨æˆ·ç”»åƒå¿«ç…§ (æ±‡æ€»å±‚)                   â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                         â”‚
â”‚   â”‚ UK: customer_id + task_id +       â”‚                                         â”‚
â”‚   â”‚     period_type + period_key      â”‚                                         â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚                                         â”‚
â”‚   â”‚ total_calls, connected_calls      â”‚  é€šè¯ç»Ÿè®¡                               â”‚
â”‚   â”‚ avg_duration, avg_rounds          â”‚                                         â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚                                         â”‚
â”‚   â”‚ final_satisfaction â˜…              â”‚  ç»¼åˆæ»¡æ„åº¦ (æœ€åä¸€æ¬¡æœ‰æ•ˆ)               â”‚
â”‚   â”‚ final_emotion â˜…                   â”‚  ç»¼åˆæƒ…æ„Ÿ (è´Ÿé¢ä¼˜å…ˆ)                     â”‚
â”‚   â”‚ risk_level â˜…                      â”‚  ç»¼åˆé£é™© (é«˜ä¼˜å…ˆ)                       â”‚
â”‚   â”‚ willingness â˜…                     â”‚  ç»¼åˆæ²Ÿé€šæ„æ„¿                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                    â”‚ GROUP BY task_id, period                                   â”‚
â”‚                    â–¼                                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚   â”‚    task_portrait_summary          â”‚  åœºæ™¯ç”»åƒæ±‡æ€» (æŠ¥è¡¨å±‚)                   â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                         â”‚
â”‚   â”‚ UK: task_id + period_type +       â”‚                                         â”‚
â”‚   â”‚     period_key                    â”‚                                         â”‚
â”‚   â”‚ task_name                         â”‚  â† MySQL autodialer_task.name          â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚                                         â”‚
â”‚   â”‚ total_customers, total_calls      â”‚  åŸºç¡€ç»Ÿè®¡                               â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚                                         â”‚
â”‚   â”‚ satisfied_rate â˜…                  â”‚  æ»¡æ„åº¦è¶‹åŠ¿åˆ†å­                         â”‚
â”‚   â”‚ high_risk_rate â˜…                  â”‚  é£é™©è¶‹åŠ¿åˆ†å­                           â”‚
â”‚   â”‚ positive_rate â˜…                   â”‚  æƒ…æ„Ÿè¶‹åŠ¿åˆ†å­                           â”‚
â”‚   â”‚ deep_willingness_rate â˜…           â”‚  æ²Ÿé€šæ„æ„¿è¶‹åŠ¿åˆ†å­                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### èšåˆç»´åº¦è¯´æ˜

| å±‚çº§ | è¡¨å | èšåˆç»´åº¦ | ç”¨é€” |
|------|------|---------|------|
| æ˜ç»†å±‚ | `call_record_enriched` | æ¯é€šç”µè¯ | è§„åˆ™å¼•æ“åˆ†æè¾“å…¥ |
| æ±‡æ€»å±‚ | `user_portrait_snapshot` | `customer_id + task_id + period` | å®¢æˆ·æ˜ç»†åˆ—è¡¨å±•ç¤º |
| æŠ¥è¡¨å±‚ | `task_portrait_summary` | `task_id + period` | ç»Ÿè®¡å¡ç‰‡ã€åˆ†å¸ƒå›¾ã€è¶‹åŠ¿å›¾ |

---

## ç”»åƒè®¡ç®—å£å¾„

### å››ç»´åº¦ç”»åƒä½“ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç”¨æˆ·ç”»åƒå››ç»´åº¦                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚    æ»¡æ„åº¦        â”‚  â”‚     é£é™©        â”‚  â”‚     æƒ…æ„Ÿ        â”‚  â”‚ æ²Ÿé€šæ„æ„¿   â”‚â”‚
â”‚   â”‚  Satisfaction   â”‚  â”‚     Risk        â”‚  â”‚    Emotion      â”‚  â”‚ Willingnessâ”‚â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚   â”‚ â€¢ æ»¡æ„ satisfiedâ”‚  â”‚ â€¢ æµå¤± churn    â”‚  â”‚ â€¢ æ­£å‘ positive â”‚  â”‚ â€¢ æ·±åº¦     â”‚â”‚
â”‚   â”‚ â€¢ ä¸€èˆ¬ neutral  â”‚  â”‚ â€¢ æŠ•è¯‰ complaintâ”‚  â”‚ â€¢ ä¸­æ€§ neutral  â”‚  â”‚ â€¢ ä¸€èˆ¬     â”‚â”‚
â”‚   â”‚ â€¢ ä¸æ»¡æ„        â”‚  â”‚ â€¢ ä¸€èˆ¬ medium   â”‚  â”‚ â€¢ è´Ÿå‘ negative â”‚  â”‚ â€¢ è¾ƒä½     â”‚â”‚
â”‚   â”‚   unsatisfied   â”‚  â”‚ â€¢ æ— é£é™© none   â”‚  â”‚                 â”‚  â”‚            â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. æ»¡æ„åº¦ (Satisfaction)

**æ•°æ®æ¥æºä¼˜å…ˆçº§**: ASR æ ‡ç­¾ > ç”¨æˆ·æ‰“åˆ† > å…³é”®è¯åŒ¹é…

```python
# 1. ASR æ ‡ç­¾è¯†åˆ« (æœ€é«˜ä¼˜å…ˆçº§)
SATISFACTION_ASR_TAGS = {
    'satisfied': ['æ»¡åˆ†', 'Q7-æ»¡åˆ†', 'Q9-æ»¡åˆ†', 'éå¸¸æ»¡æ„', 'å¾ˆæ»¡æ„'],
    'unsatisfied': ['éæ»¡åˆ†', 'Q7-éæ»¡åˆ†', 'ä¸æ»¡æ„', 'éå¸¸ä¸æ»¡æ„'],
    'neutral': ['ä¸€èˆ¬', 'Q8', 'default', 'è¿˜å¯ä»¥'],
}

# 2. ç”¨æˆ·æ‰“åˆ†è¯†åˆ« (æ­£åˆ™åŒ¹é…)
SCORE_PATTERNS = {
    'satisfied': [r'10åˆ†', r'ååˆ†', r'9åˆ†', r'ä¹åˆ†', r'æ»¡åˆ†'],
    'neutral': [r'8åˆ†', r'å…«åˆ†', r'7åˆ†', r'ä¸ƒåˆ†', r'6åˆ†'],
    'unsatisfied': [r'[0-5]åˆ†', r'é›¶åˆ†', r'ä¸€åˆ†', r'ä¸¤åˆ†'],
}

# 3. å…³é”®è¯åŒ¹é… (å…œåº•)
SATISFACTION_KEYWORDS = {
    'satisfied': ['æ»¡æ„', 'å¾ˆå¥½', 'ä¸é”™', 'è°¢è°¢', 'è§£å†³äº†', 'å¤„ç†å¥½äº†'],
    'unsatisfied': ['ä¸æ»¡æ„', 'ä¸å¥½', 'å·®', 'æ²¡è§£å†³', 'å¤±æœ›'],
    'neutral': ['ä¸€èˆ¬', 'è¿˜è¡Œ', 'å‡‘åˆ', 'é©¬é©¬è™è™'],
}
```

**å¤šé€šç”µè¯ç»¼åˆè§„åˆ™**: å–æœ€åä¸€æ¬¡æœ‰æ•ˆè¯„åˆ†

### 2. é£é™© (Risk)

**ç»¼åˆé£é™©ç­‰çº§åˆ¤å®š**:

```
if churn_risk == 'high':     â†’ æµå¤±é£é™© (churn)
elif complaint_risk == 'high': â†’ æŠ•è¯‰é£é™© (complaint)
elif any == 'medium':        â†’ ä¸€èˆ¬ (medium)
else:                        â†’ æ— é£é™© (none)
```

**æŠ•è¯‰é£é™©å…³é”®è¯**:

| ç­‰çº§ | å…³é”®è¯ç¤ºä¾‹ |
|------|-----------|
| high | æŠ•è¯‰ã€ä¸¾æŠ¥ã€å·¥ä¿¡éƒ¨ã€12315ã€éª—äººã€åƒåœ¾ã€æ‰¾é¢†å¯¼ã€èµ·è¯‰ã€å¾‹å¸ˆ |
| medium | ä¸æ»¡æ„ã€å¤ªå·®ã€æ•…éšœã€æ²¡è§£å†³ã€ä¹±æ”¶è´¹ã€æ€åº¦å·®ã€å¤±æœ› |

**æµå¤±é£é™©å…³é”®è¯**:

| ç­‰çº§ | å…³é”®è¯ç¤ºä¾‹ |
|------|-----------|
| high | ä¸ç”¨äº†ã€å–æ¶ˆã€é€€è®¢ã€é”€æˆ·ã€æ¢è¿è¥å•†ã€æºå·è½¬ç½‘ã€æ¢å¥—é¤ |
| medium | è€ƒè™‘ã€å¤ªè´µã€åˆ’ä¸æ¥ã€å¾ˆå°‘ç”¨ã€åˆ«å®¶ |

**å‡çº§è§„åˆ™**: å‘½ä¸­ â‰¥3 ä¸ª medium å…³é”®è¯ â†’ å‡çº§ä¸º high

**å¤šé€šç”µè¯ç»¼åˆè§„åˆ™**: é«˜é£é™©ä¼˜å…ˆ

### 3. æƒ…æ„Ÿ (Emotion)

**æƒ…æ„Ÿå…³é”®è¯**:

| ç±»å‹ | å…³é”®è¯ç¤ºä¾‹ |
|------|-----------|
| positive | å¥½ã€è°¢è°¢ã€æ»¡æ„ã€ä¸é”™ã€è§£å†³äº†ã€ä¸“ä¸šã€è€å¿ƒ |
| negative | å·®ã€çƒ¦ã€æŠ•è¯‰ã€é—®é¢˜ã€æ•…éšœã€éª—ã€åƒåœ¾ã€å¤±æœ› |
| neutral | å“¦ã€å—¯ã€çŸ¥é“äº†ã€å¥½å§ã€è¡Œå§ |

**åˆ¤å®šè§„åˆ™**:

```python
if negative_count > 0:   â†’ negative  # è´Ÿé¢ä¼˜å…ˆ
elif positive_count > 0: â†’ positive
else:                    â†’ neutral
```

**å¤šé€šç”µè¯ç»¼åˆè§„åˆ™**: è´Ÿé¢ä¼˜å…ˆï¼ˆæœ‰ä¸€æ¬¡è´Ÿé¢å°±ç®—è´Ÿé¢ï¼‰

### 4. æ²Ÿé€šæ„æ„¿ (Willingness)

**åˆ¤å®šè§„åˆ™**:

| ç­‰çº§ | åˆ¤å®šæ¡ä»¶ |
|------|---------|
| æ·±åº¦ | é€šè¯æ—¶é•¿ > 60ç§’ **æˆ–** äº¤äº’è½®æ¬¡ > 5 |
| è¾ƒä½ | é€šè¯æ—¶é•¿ < 20ç§’ **ä¸”** äº¤äº’è½®æ¬¡ < 3 |
| ä¸€èˆ¬ | å…¶ä»–æƒ…å†µ |

**å¤šé€šç”µè¯ç»¼åˆè§„åˆ™**: åŸºäºå¹³å‡é€šè¯æ—¶é•¿å’Œå¹³å‡äº¤äº’è½®æ¬¡

### è¶‹åŠ¿æŒ‡æ ‡è®¡ç®—å£å¾„

| è¶‹åŠ¿ç»´åº¦ | åˆ†å­ | åˆ†æ¯ | è¯´æ˜ |
|---------|------|------|------|
| æ»¡æ„åº¦è¶‹åŠ¿ | satisfied å®¢æˆ·æ•° | æœ‰æ»¡æ„åº¦æ•°æ®çš„å®¢æˆ·æ€»æ•° | æ»¡æ„æ¯”ä¾‹ |
| é£é™©è¶‹åŠ¿ | churn + complaint å®¢æˆ·æ•° | æ€»å®¢æˆ·æ•° | é«˜é£é™©æ¯”ä¾‹ |
| æƒ…æ„Ÿè¶‹åŠ¿ | positive å®¢æˆ·æ•° | æœ‰æƒ…æ„Ÿæ•°æ®çš„å®¢æˆ·æ€»æ•° | æ­£å‘æ¯”ä¾‹ |
| æ²Ÿé€šæ„æ„¿è¶‹åŠ¿ | æ·±åº¦æ²Ÿé€šå®¢æˆ·æ•° | æ€»å®¢æˆ·æ•° | æ·±åº¦æ²Ÿé€šæ¯”ä¾‹ |

---

## åç«¯è¯´æ˜

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ api/                    # API å±‚
â”‚   â””â”€â”€ v1/
â”‚       â”œâ”€â”€ task.py         # åœºæ™¯/ä»»åŠ¡ç›¸å…³æ¥å£
â”‚       â”œâ”€â”€ admin.py        # ç®¡ç†æ¥å£
â”‚       â””â”€â”€ periods.py      # å‘¨æœŸæ¥å£
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ database.py         # æ•°æ®åº“è¿æ¥
â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ portrait/
â”‚       â”œâ”€â”€ call_enriched.py   # å¢å¼ºé€šè¯è®°å½•
â”‚       â”œâ”€â”€ snapshot.py        # ç”¨æˆ·ç”»åƒå¿«ç…§
â”‚       â””â”€â”€ task_summary.py    # åœºæ™¯ç”»åƒæ±‡æ€»
â”œâ”€â”€ services/               # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ etl_service.py         # ETL æ•°æ®åŒæ­¥
â”‚   â”œâ”€â”€ rule_engine_service.py # è§„åˆ™å¼•æ“åˆ†æ
â”‚   â”œâ”€â”€ portrait_service.py    # ç”»åƒè®¡ç®—
â”‚   â””â”€â”€ period_service.py      # å‘¨æœŸç®¡ç†
â”œâ”€â”€ schemas/                # Pydantic æ¨¡å‹
â”‚   â””â”€â”€ response.py
â”œâ”€â”€ tasks/
â”‚   â””â”€â”€ scheduler.py        # å®šæ—¶ä»»åŠ¡
â””â”€â”€ main.py                 # åº”ç”¨å…¥å£
```

### API æ¥å£åˆ—è¡¨

#### åœºæ™¯/ä»»åŠ¡æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/v1/task/periods` | GET | è·å–å¯ç”¨å‘¨æœŸåˆ—è¡¨ |
| `/api/v1/task` | GET | è·å–åœºæ™¯åˆ—è¡¨ï¼ˆæ”¯æŒæŒ‰å‘¨æœŸç­›é€‰ï¼‰ |
| `/api/v1/task/{id}/summary` | GET | è·å–åœºæ™¯ç»Ÿè®¡æ±‡æ€» |
| `/api/v1/task/{id}/trend` | GET | è·å–åœºæ™¯è¶‹åŠ¿æ•°æ® |
| `/api/v1/task/{id}/customers` | GET | è·å–å®¢æˆ·æ˜ç»†åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ï¼‰ |

#### ç®¡ç†æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/v1/admin/status` | GET | ç³»ç»ŸçŠ¶æ€ |
| `/api/v1/admin/sync` | POST | æ‰‹åŠ¨è§¦å‘æ•°æ®åŒæ­¥ |
| `/api/v1/admin/compute` | POST | æ‰‹åŠ¨è§¦å‘ç”»åƒè®¡ç®— |
| `/api/v1/admin/sync-task-names` | POST | åŒæ­¥åœºæ™¯åç§° |

### æœåŠ¡æ¨¡å—è¯´æ˜

#### ETL Service (`etl_service.py`)

```python
class ETLService:
    """æ•°æ®åŒæ­¥æœåŠ¡"""
    
    async def sync_call_records(target_date: date) -> dict:
        """
        åŒæ­¥æŒ‡å®šæ—¥æœŸçš„é€šè¯è®°å½•
        1. ä» MySQL è¯»å–é€šè¯è®°å½•
        2. å†™å…¥ PostgreSQL call_record_enriched
        3. è·å– ASR è¯¦æƒ…å¹¶è°ƒç”¨è§„åˆ™å¼•æ“åˆ†æ
        """
    
    async def analyze_call_records(target_date: date) -> int:
        """
        åˆ†ææŒ‡å®šæ—¥æœŸçš„é€šè¯è®°å½•
        1. æ‰¹é‡è·å– ASR è¯¦æƒ…
        2. è°ƒç”¨è§„åˆ™å¼•æ“åˆ†æ
        3. æ‰¹é‡æ›´æ–°åˆ†æç»“æœ
        """
```

#### Rule Engine Service (`rule_engine_service.py`)

```python
class RuleEngineService:
    """è§„åˆ™å¼•æ“æœåŠ¡ - åŸºäºå…³é”®è¯å’Œè§„åˆ™è¿›è¡Œåˆ†æ"""
    
    def analyze_call(
        user_text: str,
        asr_labels: list[str],
        duration: int,
        rounds: int
    ) -> AnalysisResult:
        """
        åˆ†æå•é€šç”µè¯
        è¿”å›: satisfaction, emotion, complaint_risk, churn_risk, willingness, risk_level
        """
    
    def aggregate_multi_calls(call_results: list[dict]) -> dict:
        """
        å¤šé€šç”µè¯ç»¼åˆè§„åˆ™
        - æ»¡æ„åº¦ï¼šå–æœ€åä¸€æ¬¡æœ‰æ•ˆè¯„åˆ†
        - æƒ…æ„Ÿï¼šè´Ÿé¢ä¼˜å…ˆ
        - é£é™©ï¼šé«˜ä¼˜å…ˆ
        - æ²Ÿé€šæ„æ„¿ï¼šåŸºäºå¹³å‡å€¼
        """
```

#### Portrait Service (`portrait_service.py`)

```python
class PortraitService:
    """ç”»åƒè®¡ç®—æœåŠ¡"""
    
    async def compute_snapshot(period_type: str, period_key: str) -> dict:
        """
        è®¡ç®—ç”¨æˆ·ç”»åƒå¿«ç…§
        1. æŒ‰ (customer_id, task_id) èšåˆ call_record_enriched
        2. åº”ç”¨å¤šé€šç”µè¯ç»¼åˆè§„åˆ™
        3. æ‰¹é‡ UPSERT åˆ° user_portrait_snapshot
        """
    
    async def compute_task_summary(period_type: str, period_key: str) -> dict:
        """
        è®¡ç®—åœºæ™¯ç”»åƒæ±‡æ€»
        1. æŒ‰ task_id èšåˆ user_portrait_snapshot
        2. è®¡ç®—å„ç»´åº¦å æ¯”
        3. UPSERT åˆ° task_portrait_summary
        """
```

### å®šæ—¶ä»»åŠ¡é…ç½®

| ä»»åŠ¡ | é»˜è®¤æ—¶é—´ | åŠŸèƒ½ |
|------|---------|------|
| æ•°æ®åŒæ­¥ | 02:00 | åŒæ­¥å‰ä¸€å¤©é€šè¯è®°å½• + ASR åˆ†æ |
| ç”»åƒè®¡ç®— | 06:00 | è®¡ç®—å‘¨/æœˆ/å­£åº¦å¿«ç…§å’Œæ±‡æ€» |

é…ç½®æ–¹å¼:

```env
SCHEDULER_ENABLED=true
SYNC_CRON_HOUR=2
SYNC_CRON_MINUTE=0
```

---

## å‰ç«¯è¯´æ˜

### é¡¹ç›®ç»“æ„

```
web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ index.ts        # API å°è£…
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts        # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â””â”€â”€ PortraitDashboard.vue  # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ App.vue
â”‚   â””â”€â”€ main.ts
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

### é¡µé¢åŠŸèƒ½æ¨¡å—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äººç¾¤ç”»åƒç»Ÿè®¡ä¸åˆ†æ                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ç­›é€‰æ¡: [é€‰æ‹©åœºæ™¯ â–¼] [é€‰æ‹©å‘¨ â–¼] [åˆ·æ–°]                                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚  æ€»å®¢æˆ·æ•°     â”‚ â”‚  æ€»é€šè¯æ•°     â”‚ â”‚  å¹³å‡æ—¶é•¿     â”‚   â† ç»Ÿè®¡æ¦‚è§ˆå¡ç‰‡           â”‚
â”‚  â”‚    4,284     â”‚ â”‚    5,120     â”‚ â”‚    45.5ç§’    â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ æ»¡æ„åº¦åˆ†å¸ƒ â”‚ é£é™©åˆ†å¸ƒ â”‚ æƒ…æ„Ÿåˆ†å¸ƒ â”‚ æ²Ÿé€šæ„æ„¿åˆ†å¸ƒ â”‚   â† 4ç»´åº¦åˆ†å¸ƒé¥¼å›¾           â”‚â”‚
â”‚  â”‚   [é¥¼å›¾]   â”‚  [é¥¼å›¾]  â”‚  [é¥¼å›¾]  â”‚    [é¥¼å›¾]    â”‚                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ç”»åƒè¶‹åŠ¿å˜åŒ–ï¼ˆ4ä¸ªç»´åº¦ï¼‰                           [æœ€è¿‘4å‘¨ â–¼]                â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚ â”‚                          [æŠ˜çº¿å›¾]                                      â”‚â”‚â”‚
â”‚  â”‚ â”‚  â”€â”€ æ»¡æ„åº¦  â”€â”€ é£é™©  â”€â”€ æ­£å‘æƒ…æ„Ÿ  â”€â”€ æ·±åº¦æ²Ÿé€š                          â”‚â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ç”¨æˆ·ç”»åƒæ˜ç»†åˆ—è¡¨                                                           â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚ â”‚ [æ‰‹æœºå·æœç´¢] [æ»¡æ„åº¦ â–¼] [æƒ…æ„Ÿ â–¼] [é£é™© â–¼] [æ²Ÿé€šæ„æ„¿ â–¼]   â† ç­›é€‰å™¨        â”‚â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚ â”‚ å®¢æˆ·ID â”‚ æ‰‹æœºå·  â”‚ åœºæ™¯   â”‚ é€šè¯æ•° â”‚ å¹³å‡æ—¶é•¿â”‚ æ»¡æ„åº¦ â”‚ æƒ…æ„Ÿ   â”‚ é£é™©   â”‚ æ²Ÿé€šæ„æ„¿ â”‚â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚â”‚
â”‚  â”‚ â”‚ ...    â”‚ ...    â”‚ ...    â”‚ ...    â”‚ ...    â”‚ æ»¡æ„   â”‚ æ­£å‘   â”‚ æ— é£é™© â”‚ æ·±åº¦   â”‚â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚                                           [< 1 2 3 ... >]   â† åˆ†é¡µ         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API è°ƒç”¨æµç¨‹

```typescript
// 1. åˆå§‹åŒ–åŠ è½½
onMounted(async () => {
  await loadAvailablePeriods()  // GET /task/periods
  await loadTasks()              // GET /task?period_key=xxx
  await loadData()               // å¹¶è¡ŒåŠ è½½æ±‡æ€»ã€è¶‹åŠ¿ã€å®¢æˆ·åˆ—è¡¨
})

// 2. åŠ è½½æ±‡æ€»æ•°æ®
async function loadSummary() {
  // GET /task/{id}/summary?period_type=week&period_key=2025-W48
}

// 3. åŠ è½½è¶‹åŠ¿æ•°æ® (4ä¸ªç»´åº¦)
async function loadTrends() {
  await Promise.all([
    fetchTaskTrend(taskId, 'week', 'satisfied_rate', limit),
    fetchTaskTrend(taskId, 'week', 'high_risk_rate', limit),
    fetchTaskTrend(taskId, 'week', 'positive_rate', limit),
    fetchTaskTrend(taskId, 'week', 'deep_willingness_rate', limit),
  ])
}

// 4. åŠ è½½å®¢æˆ·åˆ—è¡¨ (æ”¯æŒç­›é€‰)
async function loadCustomers() {
  // GET /task/{id}/customers?period_type=week&period_key=2025-W48
  //     &phone=xxx&satisfaction=satisfied&emotion=positive
  //     &risk_level=none&willingness=æ·±åº¦
}
```

### å…³é”®ç»„ä»¶è¯´æ˜

| ç»„ä»¶ | åŠŸèƒ½ | æ•°æ®æ¥æº |
|------|------|---------|
| ç»Ÿè®¡æ¦‚è§ˆå¡ç‰‡ | æ˜¾ç¤ºæ€»å®¢æˆ·/é€šè¯/æ—¶é•¿ | `/task/{id}/summary` |
| 4ç»´åº¦åˆ†å¸ƒé¥¼å›¾ | å„ç»´åº¦å æ¯”å¯è§†åŒ– | `/task/{id}/summary` |
| è¶‹åŠ¿æŠ˜çº¿å›¾ | 4ç»´åº¦è¶‹åŠ¿å˜åŒ– | `/task/{id}/trend` Ã— 4 |
| æ˜ç»†åˆ—è¡¨ | å®¢æˆ·ç”»åƒè¯¦æƒ… + ç­›é€‰ | `/task/{id}/customers` |

---

## éƒ¨ç½²ä¸å¯åŠ¨

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Python**: 3.11+
- **Node.js**: 18+
- **Docker**: ç”¨äºè¿è¡ŒPostgreSQLæ•°æ®åº“
- **uv**: PythonåŒ…ç®¡ç†å™¨ (æ¨è) æˆ– pip

### ğŸš€ å¿«é€Ÿå¯åŠ¨ (æœ¬åœ°å¼€å‘)

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/portrait.git
cd portrait
```

#### 2. å®‰è£…ä¾èµ–

**åç«¯ä¾èµ–**:

```bash
# ä½¿ç”¨ uv (æ¨è)
uv sync

# æˆ–ä½¿ç”¨ pip
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

**å‰ç«¯ä¾èµ–**:

```bash
cd web
npm install
cd ..
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ (å¯é€‰,é»˜è®¤é…ç½®å³å¯è¿è¡Œ)
# å¦‚æœåªæ˜¯ä½“éªŒç³»ç»Ÿ,æ— éœ€ä¿®æ”¹
```

#### 4. å¯åŠ¨æ•°æ®åº“

```bash
# å¯åŠ¨ PostgreSQL (ä½¿ç”¨ Docker)
docker compose -f docker/docker-compose.yml up -d postgres
```

#### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“è¡¨
uv run python scripts/init_db.py

# æˆ–ä½¿ç”¨ Alembic è¿ç§»
uv run alembic upgrade head
```

#### 6. å¯åŠ¨æœåŠ¡

**æ–¹å¼1: ä¸€é”®å¯åŠ¨ (æ¨è)**

```bash
sh scripts/start_all.sh
```

**æ–¹å¼2: åˆ†åˆ«å¯åŠ¨**

```bash
# ç»ˆç«¯1: å¯åŠ¨åç«¯
uv run uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload

# ç»ˆç«¯2: å¯åŠ¨å‰ç«¯
cd web
npm run dev
```

#### 7. è®¿é—®ç³»ç»Ÿ

- **å‰ç«¯**: <http://localhost:3001>
- **åç«¯APIæ–‡æ¡£**: <http://localhost:8000/docs>
- **å¥åº·æ£€æŸ¥**: <http://localhost:8000/health>

### ğŸ“Š åŠ è½½ç¤ºä¾‹æ•°æ® (å¯é€‰)

å¦‚æœä½ æƒ³ä½“éªŒå®Œæ•´åŠŸèƒ½,å¯ä»¥åŠ è½½ç¤ºä¾‹æ•°æ®:

```bash
# åŠ è½½ç¤ºä¾‹æ•°æ®åˆ°æ•°æ®åº“
uv run python scripts/load_demo_data.py
```

### ğŸ›‘ åœæ­¢æœåŠ¡

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
sh scripts/stop_all.sh

# åœæ­¢å¹¶æ¸…ç† Docker
sh scripts/stop_all.sh --all
```

---

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
>
> [!IMPORTANT]
> **ç¦»çº¿éƒ¨ç½²**: äº‘ç«¯æœåŠ¡å™¨ä½äºç§åŸŸç½‘ç»œ,æ— æ³•è®¿é—®å¤–ç½‘æ‹‰å– Docker é•œåƒå’Œä¾èµ–åŒ…

#### éƒ¨ç½²æ¶æ„

```
æœ¬åœ°å¼€å‘æœº (M1 Mac)          äº‘ç«¯æœåŠ¡å™¨ (Ubuntu)
     â”‚                              â”‚
     â”œâ”€ 1. æ„å»ºå¹¶æ‰“åŒ…é•œåƒ           â”‚
     â”œâ”€ 2. ä¼ è¾“ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
     â”‚                              â”œâ”€ 3. å¯¼å…¥å¹¶éƒ¨ç½²
     â”‚                              â””â”€ 4. è®¿é—®ç³»ç»Ÿ
```

#### æ­¥éª¤ 1: æœ¬åœ°æ„å»ºå¹¶æ‰“åŒ…

```bash
# åœ¨æœ¬åœ°å¼€å‘æœºæ‰§è¡Œ
cd /path/to/portrait

# ä¸€é”®æ„å»ºå¹¶æ‰“åŒ…æ‰€æœ‰é•œåƒ
./scripts/build_and_export.sh
```

**è„šæœ¬åŠŸèƒ½**:

- âœ… è‡ªåŠ¨æ£€æŸ¥ Docker Buildx ç¯å¢ƒ
- âœ… åˆ›å»ºè·¨å¹³å°æ„å»ºå™¨
- âœ… æ„å»ºåç«¯ API é•œåƒ (portrait-api:latest)
- âœ… æ„å»ºå‰ç«¯ Web é•œåƒ (portrait-web:latest)
- âœ… æ‹‰å– PostgreSQL é•œåƒ (postgres:15-alpine)
- âœ… éªŒè¯é•œåƒå¹³å°æ¶æ„ä¸º linux/amd64
- âœ… å¯¼å‡ºæ‰€æœ‰é•œåƒä¸º tar æ–‡ä»¶

**è¾“å‡ºæ–‡ä»¶**: `files/portrait-images.tar` (çº¦ 500MB)

**é¢„è®¡è€—æ—¶**: 5-10 åˆ†é’Ÿ(é¦–æ¬¡æ„å»º)

#### æ­¥éª¤ 2: ä¼ è¾“åˆ°äº‘ç«¯æœåŠ¡å™¨

é€‰æ‹©ä»¥ä¸‹ä»»ä¸€æ–¹å¼ä¼ è¾“é•œåƒæ–‡ä»¶:

**æ–¹å¼ 1: scp å‘½ä»¤**

```bash
# æ³¨æ„ï¼šå®é™…æ–‡ä»¶åå¸¦æœ‰æ—¶é—´æˆ³ï¼Œå¦‚ portrait-images_20260106_152730.tar.gz
scp files/portrait-images_*.tar.gz user@your-server:/home/user/
```

**æ–¹å¼ 2: rsync å‘½ä»¤ (æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œæ¨èå¤§æ–‡ä»¶)**

```bash
rsync -avP files/portrait-images_*.tar.gz user@your-server:/home/user/
```

**æ–¹å¼ 3: ç‰©ç†ä¼ è¾“**

- ä½¿ç”¨ Uç›˜/ç§»åŠ¨ç¡¬ç›˜å¤åˆ¶æ–‡ä»¶åˆ°äº‘ç«¯æœåŠ¡å™¨

#### æ­¥éª¤ 3: è¿œç«¯æœåŠ¡å™¨å‡†å¤‡

> [!NOTE]
> æ‰“åŒ…æ–‡ä»¶ `portrait-images_*.tar.gz` å·²åŒ…å«æ‰€æœ‰å¿…éœ€æ–‡ä»¶ï¼ˆé•œåƒã€é…ç½®ã€è„šæœ¬ï¼‰ï¼Œæ— éœ€é¢å¤–å…‹éš†ä»£ç 

**SSH ç™»å½•åˆ°è¿œç«¯æœåŠ¡å™¨åæ‰§è¡Œï¼š**

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /home/user/portrait
cd /home/user/portrait

# å°†æ‰“åŒ…æ–‡ä»¶ç§»åŠ¨åˆ°é¡¹ç›®ç›®å½•ï¼ˆå¦‚æœä¸åœ¨æ­¤ç›®å½•ï¼‰
mv ~/portrait-images_*.tar.gz .
```

#### æ­¥éª¤ 4: è§£å‹å¹¶éƒ¨ç½²

```bash
# è§£å‹æ‰“åŒ…æ–‡ä»¶
tar -xzf portrait-images_*.tar.gz

# èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/*.sh

# ä¸€é”®å¯¼å…¥é•œåƒå¹¶å¯åŠ¨æœåŠ¡
./scripts/deploy_remote.sh portrait-images_*.tar.gz
```

**æ‰“åŒ…æ–‡ä»¶åŒ…å«ï¼š**

- âœ… Docker é•œåƒï¼ˆportrait-apiã€portrait-webã€postgresï¼‰
- âœ… `docker-compose.prod.yml`ï¼ˆç¼–æ’é…ç½®ï¼‰
- âœ… `.env`ï¼ˆç¯å¢ƒå˜é‡ï¼‰
- âœ… `scripts/deploy_remote.sh`ï¼ˆéƒ¨ç½²è„šæœ¬ï¼‰
- âœ… `scripts/check_access.sh`ï¼ˆè®¿é—®æ£€æµ‹è„šæœ¬ï¼‰

**éƒ¨ç½²è„šæœ¬åŠŸèƒ½**:

- âœ… è§£å‹å¹¶å¯¼å…¥æ‰€æœ‰ Docker é•œåƒ
- âœ… éªŒè¯é•œåƒå®Œæ•´æ€§å’Œæ¶æ„
- âœ… å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
- âœ… å¯åŠ¨ Docker Compose æœåŠ¡
- âœ… æ‰§è¡Œå¥åº·æ£€æŸ¥
- âœ… æ˜¾ç¤ºè®¿é—®åœ°å€

#### æ­¥éª¤ 5: é…ç½®ç¯å¢ƒå˜é‡

é¦–æ¬¡éƒ¨ç½²æ—¶,è„šæœ¬ä¼šè‡ªåŠ¨ä»æ‰“åŒ…æ–‡ä»¶ä¸­æå– `.env` æ–‡ä»¶ã€‚å¦‚éœ€ä¿®æ”¹é…ç½®:

```bash
vim .env
```

**å¿…éœ€é…ç½®**:

```env
# MySQL æºæ•°æ®åº“(è¿æ¥çº¿ä¸Šå¤–å‘¼ç³»ç»Ÿ)
MYSQL_HOST=your_mysql_host
MYSQL_PORT=3306
MYSQL_USER=readonly_user
MYSQL_PASSWORD=your_password
MYSQL_DB=outbound_saas

# PostgreSQL ç”»åƒæ•°æ®åº“
POSTGRES_USER=portrait
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=portrait
```

é…ç½®å®Œæˆå,é‡å¯æœåŠ¡:

```bash
docker compose -f docker-compose.prod.yml down
docker compose -f docker-compose.prod.yml up -d
```

#### æ­¥éª¤ 6: åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿è¡Œæ•°æ®åº“è¿ç§»
docker compose -f docker-compose.prod.yml exec portrait-api alembic upgrade head

# æˆ–ä½¿ç”¨åˆå§‹åŒ–è„šæœ¬ï¼ˆå¦‚æœ alembic å¤±è´¥ï¼‰
docker compose -f docker-compose.prod.yml exec portrait-api python scripts/init_db.py
```

#### æ­¥éª¤ 7: éªŒè¯éƒ¨ç½²å¹¶è·å–è®¿é—®åœ°å€

```bash
# è¿è¡Œè®¿é—®æ£€æµ‹è„šæœ¬
./scripts/check_access.sh
```

**æ£€æµ‹è„šæœ¬ä¼šè‡ªåŠ¨ï¼š**

- âœ… è·å–æœåŠ¡å™¨å†…ç½‘ IP å’Œå…¬ç½‘ IP
- âœ… æ£€æµ‹ Docker å®¹å™¨è¿è¡ŒçŠ¶æ€
- âœ… æ£€æµ‹ç«¯å£ç›‘å¬çŠ¶æ€ï¼ˆ80/8000/5432ï¼‰
- âœ… æ‰§è¡ŒæœåŠ¡å¥åº·æ£€æŸ¥
- âœ… æ£€æµ‹é˜²ç«å¢™é…ç½®
- âœ… ç”Ÿæˆè®¿é—®åœ°å€

**è®¿é—®åœ°å€ç¤ºä¾‹ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯è®¿é—®åœ°å€                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å±€åŸŸç½‘: http://192.168.1.100                            â”‚
â”‚  å…¬ç½‘:   http://123.45.67.89                             â”‚
â”‚  æœ¬æœº:   http://localhost                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API æ–‡æ¡£                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å±€åŸŸç½‘: http://192.168.1.100:8000/docs                  â”‚
â”‚  å…¬ç½‘:   http://123.45.67.89:8000/docs                   â”‚
â”‚  æœ¬æœº:   http://localhost:8000/docs                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ­¥éª¤ 8: é…ç½®é˜²ç«å¢™ï¼ˆå¦‚æ— æ³•è®¿é—®ï¼‰

å¦‚æœæ£€æµ‹è„šæœ¬æç¤ºé˜²ç«å¢™ç«¯å£æœªå¼€æ”¾ï¼Œéœ€è¦æ‰§è¡Œï¼š

**Ubuntu/Debian (UFW):**

```bash
sudo ufw allow 80/tcp
sudo ufw allow 8000/tcp
sudo ufw status
```

**CentOS/RHEL (firewalld):**

```bash
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --permanent --add-port=8000/tcp
sudo firewall-cmd --reload
sudo firewall-cmd --list-ports
```

**äº‘æœåŠ¡å™¨å®‰å…¨ç»„:**

å¦‚æœä½¿ç”¨é˜¿é‡Œäº‘/è…¾è®¯äº‘ç­‰äº‘æœåŠ¡å™¨ï¼Œè¿˜éœ€è¦åœ¨äº‘æ§åˆ¶å°çš„**å®‰å…¨ç»„**ä¸­æ·»åŠ å…¥ç«™è§„åˆ™ï¼š

- TCP 80ï¼ˆå‰ç«¯ï¼‰
- TCP 8000ï¼ˆåç«¯ APIï¼‰

---

### âœ… éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨éªŒè¯è„šæœ¬æ¥æµ‹è¯•å®Œæ•´çš„æ•°æ®å¤„ç†æµç¨‹ï¼š

#### ä½¿ç”¨éªŒè¯è„šæœ¬

```bash
# åŸºæœ¬ç”¨æ³•ï¼ˆä½¿ç”¨é»˜è®¤å‚æ•°ï¼‰
bash scripts/verify_deployment.sh

# æŒ‡å®š API åœ°å€å’Œæ—¥æœŸ
bash scripts/verify_deployment.sh --api-url http://your-server:8000 --date 2025-11-05

# è·³è¿‡æ•°æ®åŒæ­¥ï¼Œä»…éªŒè¯ç°æœ‰æ•°æ®
bash scripts/verify_deployment.sh --skip-sync

# æŸ¥çœ‹å¸®åŠ©
bash scripts/verify_deployment.sh --help
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--api-url URL` | API æœåŠ¡åœ°å€ | `http://localhost:8000` |
| `--date DATE` | åŒæ­¥æ—¥æœŸï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰ | æ˜¨å¤© |
| `--skip-sync` | è·³è¿‡æ•°æ®åŒæ­¥æ­¥éª¤ | false |
| `--help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | - |

#### éªŒè¯æµç¨‹

è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹éªŒè¯æ­¥éª¤ï¼š

1. **æ£€æŸ¥ API æœåŠ¡** - éªŒè¯ API å¥åº·çŠ¶æ€
2. **è·å–ç³»ç»ŸçŠ¶æ€** - æ˜¾ç¤ºæ•°æ®åº“è¿æ¥ã€å·²è®¡ç®—å‘¨æœŸæ•°ç­‰
3. **åŒæ­¥é€šè¯è®°å½•** - ä»æºæ•°æ®åº“åŒæ­¥æŒ‡å®šæ—¥æœŸçš„æ•°æ®
4. **è®¡ç®—ç”¨æˆ·ç”»åƒå¿«ç…§** - èšåˆè®¡ç®—ç”¨æˆ·ç”»åƒ
5. **è®¡ç®—åœºæ™¯æ±‡æ€»** - ç”Ÿæˆåœºæ™¯ç»Ÿè®¡æ•°æ®
6. **åŒæ­¥ä»»åŠ¡åç§°** - æ›´æ–°ä»»åŠ¡/åœºæ™¯åç§°
7. **éªŒè¯æ•°æ®** - æ£€æŸ¥å‘¨æœŸåˆ—è¡¨å’Œä»»åŠ¡æ•°æ®

#### ä¾èµ–è¦æ±‚

éªŒè¯è„šæœ¬éœ€è¦ä»¥ä¸‹å·¥å…·ï¼ˆé€šå¸¸ç³»ç»Ÿå·²é¢„è£…ï¼‰ï¼š

- `curl` - HTTP è¯·æ±‚å·¥å…·
- `jq` - JSON è§£æå·¥å…·

å¦‚æœç¼ºå°‘ `jq`ï¼Œè¯·å®‰è£…ï¼š

```bash
# Ubuntu/Debian
sudo apt-get install jq

# CentOS/RHEL
sudo yum install jq

# macOS
brew install jq
```

#### ç¤ºä¾‹è¾“å‡º

```
============================================================
  Portrait éƒ¨ç½²éªŒè¯
============================================================
  API åœ°å€: http://localhost:8000
  åŒæ­¥æ—¥æœŸ: 2025-11-05
  å‘¨æœŸç¼–å·: 2025-W45
============================================================

============================================================
  æ­¥éª¤ 0: æ£€æŸ¥ API æœåŠ¡
============================================================

  âœ… æˆåŠŸ: API æœåŠ¡æ­£å¸¸ - ok

============================================================
  æ­¥éª¤ 1: è·å–ç³»ç»ŸçŠ¶æ€
============================================================

  ç³»ç»ŸçŠ¶æ€: healthy
  æ•°æ®åº“:   connected
  æºæ•°æ®åº“: connected
  å·²è®¡ç®—å‘¨æœŸæ•°: 12
  ç”»åƒå¿«ç…§æ€»æ•°: 4284
  å¢å¼ºè®°å½•æ€»æ•°: 15620

  âœ… æˆåŠŸ: ç³»ç»ŸçŠ¶æ€è·å–æˆåŠŸ

...

============================================================
  âœ… éƒ¨ç½²éªŒè¯é€šè¿‡!
============================================================
```

---

### ğŸ”„ æ›´æ–°éƒ¨ç½²

å½“ä»£ç æ›´æ–°å,é‡æ–°éƒ¨ç½²:

```bash
# æœ¬åœ°: é‡æ–°æ„å»ºå¹¶æ‰“åŒ…
./scripts/build_and_export.sh

# ä¼ è¾“åˆ°äº‘ç«¯å
# äº‘ç«¯: åœæ­¢æœåŠ¡ã€é‡æ–°éƒ¨ç½²
docker-compose -f docker-compose.prod.yml down
./scripts/deploy_remote.sh portrait-images.tar
```

---

### ğŸ“Š æ•°æ®æ¸…æ´—ä¸åŒæ­¥

éƒ¨ç½²å®Œæˆåï¼Œéœ€è¦è§¦å‘æ•°æ®åŒæ­¥å°†æºæ•°æ®åº“ï¼ˆMySQLï¼‰çš„é€šè¯è®°å½•æ¸…æ´—åˆ°ç”»åƒæ•°æ®åº“ï¼ˆPostgreSQLï¼‰ã€‚

#### è‡ªåŠ¨åŒæ­¥ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰

ç³»ç»Ÿä½¿ç”¨ **APScheduler** ç®¡ç†å®šæ—¶ä»»åŠ¡ï¼š

| ä»»åŠ¡ | æ‰§è¡Œæ—¶é—´ | è¯´æ˜ |
|------|---------|------|
| **æ•°æ®åŒæ­¥** | æ¯å¤© 02:00 | åŒæ­¥å‰ä¸€å¤©çš„é€šè¯è®°å½• |
| **è§„åˆ™åˆ†æ** | æ¯å¤© 02:30 | åˆ†ææœªå¤„ç†çš„è®°å½• |
| **å‘¨æœŸå¿«ç…§** | æ¯å¤© 06:00 | å‘¨ä¸€è®¡ç®—å‘¨å¿«ç…§ï¼Œ1å·è®¡ç®—æœˆå¿«ç…§ |
| **åœºæ™¯æ±‡æ€»** | æ¯å¤© 06:30 | è®¡ç®—åœºæ™¯ç»Ÿè®¡ |

**ç¯å¢ƒå˜é‡é…ç½®**ï¼ˆ`.env` æ–‡ä»¶ï¼‰ï¼š

```env
SCHEDULER_ENABLED=true
SCHEDULER_TIMEZONE=Asia/Shanghai
SYNC_CRON_HOUR=2
SYNC_CRON_MINUTE=0
```

#### æ‰‹åŠ¨è§¦å‘åŒæ­¥

**æ–¹å¼ 1: é€šè¿‡ APIï¼ˆæ¨èï¼‰**

```bash
# åŒæ­¥æŒ‡å®šæ—¥æœŸçš„æ•°æ®
curl -X POST http://localhost:8000/api/v1/admin/sync \
  -H "Content-Type: application/json" \
  -d '{"date": "2025-11-01"}'
```

**æ–¹å¼ 2: é€šè¿‡ API æ–‡æ¡£ç•Œé¢**

1. è®¿é—® `http://localhost:8000/docs`
2. æ‰¾åˆ° `/api/v1/admin/sync` æ¥å£
3. ç‚¹å‡» "Try it out"ï¼Œè¾“å…¥æ—¥æœŸï¼Œç‚¹å‡» "Execute"

**æ–¹å¼ 3: æ‰¹é‡åŒæ­¥å†å²æ•°æ®**

```bash
# å¾ªç¯åŒæ­¥å¤šå¤©æ•°æ®
for date in 2025-11-{01..30}; do
  curl -X POST http://localhost:8000/api/v1/admin/sync \
    -H "Content-Type: application/json" \
    -d "{\"date\": \"$date\"}"
  sleep 5  # é¿å…è¿‡è½½
done
```

#### éªŒè¯åŒæ­¥ç»“æœ

```bash
# æŸ¥çœ‹åŒæ­¥çš„è®°å½•æ•°
docker exec portrait-postgres psql -U portrait -d portrait -c "
SELECT call_date, COUNT(*) as count
FROM call_record_enriched
GROUP BY call_date
ORDER BY call_date DESC LIMIT 10;
"
```

---

### ğŸ› ï¸ è¿ç»´å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.prod.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f portrait-api

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.prod.yml restart

# åœæ­¢æœåŠ¡
docker-compose -f docker-compose.prod.yml down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·(å±é™©æ“ä½œ)
docker-compose -f docker-compose.prod.yml down -v
```

---

### ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

#### é—®é¢˜ 1: å®¹å™¨å¯åŠ¨å¤±è´¥ - æ—¥å¿—æƒé™é”™è¯¯

**é”™è¯¯ä¿¡æ¯**:

```
PermissionError: [Errno 13] Permission denied: '/app/logs/portrait.log'
```

**åŸå› **: å®¿ä¸»æœºçš„ `logs` ç›®å½•ä¸å­˜åœ¨æˆ–æƒé™ä¸è¶³ã€‚

**è§£å†³æ–¹æ¡ˆ**:

```bash
# åœæ­¢æœåŠ¡
docker compose -f docker-compose.prod.yml down

# åˆ›å»ºæ—¥å¿—ç›®å½•å¹¶è®¾ç½®æƒé™
mkdir -p logs
chmod 777 logs

# é‡æ–°å¯åŠ¨
docker compose -f docker-compose.prod.yml up -d
```

**æ°¸ä¹…è§£å†³**: é‡æ–°æ„å»ºé•œåƒï¼ˆå·²åœ¨ Dockerfile ä¸­ä¿®å¤ï¼‰ã€‚

---

#### é—®é¢˜ 2: PostgreSQL è¿æ¥è¢«æ‹’ç»

**é”™è¯¯ä¿¡æ¯**:

```
ConnectionRefusedError: [Errno 111] Connection refused
```

**åŸå› **: ç¯å¢ƒå˜é‡é…ç½®é”™è¯¯ï¼Œåº”ç”¨ä½¿ç”¨äº† `localhost` è€Œä¸æ˜¯å®¹å™¨åç§°ã€‚

**æ£€æŸ¥é…ç½®**:

```bash
# 1. æŸ¥çœ‹ .env æ–‡ä»¶
cat .env | grep POSTGRES_HOST

# åº”è¯¥æ˜¯: POSTGRES_HOST=portrait-postgres
# è€Œä¸æ˜¯: POSTGRES_HOST=localhost
```

**è§£å†³æ–¹æ¡ˆ**:

ç¡®ä¿ `.env` æ–‡ä»¶ä¸­çš„é…ç½®æ­£ç¡®ï¼š

```env
# PostgreSQL (Docker ç¯å¢ƒå¿…é¡»ä½¿ç”¨å®¹å™¨åç§°)
POSTGRES_HOST=portrait-postgres  # é‡è¦ï¼
POSTGRES_PORT=5432
POSTGRES_USER=portrait
POSTGRES_PASSWORD=portrait123
POSTGRES_DB=portrait
```

é‡å¯æœåŠ¡ï¼š

```bash
docker compose -f docker-compose.prod.yml down
docker compose -f docker-compose.prod.yml up -d
```

---

#### é—®é¢˜ 3: å®¹å™¨å¥åº·æ£€æŸ¥å¤±è´¥

**ç—‡çŠ¶**: `docker compose ps` æ˜¾ç¤º `unhealthy` æˆ–ä¸æ–­é‡å¯ã€‚

**è¯Šæ–­æ­¥éª¤**:

```bash
# 1. æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker compose -f docker-compose.prod.yml ps

# 2. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker compose -f docker-compose.prod.yml logs --tail=100 portrait-api

# 3. æ£€æŸ¥å¥åº·æ£€æŸ¥çŠ¶æ€
docker inspect portrait-api --format='{{.State.Health.Status}}'

# 4. æŸ¥çœ‹å¥åº·æ£€æŸ¥æ—¥å¿—
docker inspect portrait-api --format='{{range .State.Health.Log}}{{.Output}}{{end}}'
```

**å¸¸è§åŸå› **:

- æ•°æ®åº“è¿æ¥å¤±è´¥ï¼ˆè§é—®é¢˜ 2ï¼‰
- æ—¥å¿—ç›®å½•æƒé™é—®é¢˜ï¼ˆè§é—®é¢˜ 1ï¼‰
- ç«¯å£è¢«å ç”¨

---

#### é—®é¢˜ 4: MySQL è¿æ¥å¤±è´¥ï¼ˆå¯å¿½ç•¥ï¼‰

**è¯´æ˜**: MySQL æ˜¯å¯é€‰çš„ï¼Œä»…ç”¨äºæ•°æ®åŒæ­¥ã€‚å¦‚æœæ²¡æœ‰ MySQLï¼Œç³»ç»Ÿä»å¯æ­£å¸¸å¯åŠ¨ã€‚

**ä¸´æ—¶é…ç½®** (å¦‚æœæ²¡æœ‰ MySQL):

```env
# ä½¿ç”¨å ä½ç¬¦ï¼Œä¸å½±å“å¯åŠ¨
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=test
MYSQL_PASSWORD=test
MYSQL_DB=test
```

---

#### é—®é¢˜ 5: é•œåƒæ„å»ºå¤±è´¥

**é”™è¯¯**: `ERROR: failed to solve: failed to compute cache key`

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ¸…ç† Docker æ„å»ºç¼“å­˜
docker builder prune -af

# é‡æ–°æ„å»º
./scripts/build_and_export.sh
```

---

#### é—®é¢˜ 6: è·¨å¹³å°æ„å»ºå™¨åˆ›å»ºå¤±è´¥

**é”™è¯¯**: `ERROR: Multiple platforms feature is currently not supported`

**è§£å†³æ–¹æ¡ˆ**:

```bash
# ç¡®ä¿ Docker Desktop å·²å¯ç”¨ containerd
# è®¾ç½® -> Docker Engine -> å¯ç”¨ containerd

# æˆ–æ‰‹åŠ¨åˆ›å»ºæ„å»ºå™¨
docker buildx create --name multiarch --driver docker-container --use
docker buildx inspect --bootstrap
```

---

#### é—®é¢˜ 7: æœåŠ¡å¯åŠ¨åæ— æ³•ä»å¤–éƒ¨è®¿é—®

**æ£€æŸ¥æ¸…å•**:

```bash
# 1. æ£€æŸ¥å®¹å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
docker compose -f docker-compose.prod.yml ps

# 2. æ£€æŸ¥ç«¯å£ç›‘å¬
ss -tlnp | grep -E ':(80|8000)'

# 3. æµ‹è¯•æœ¬åœ°è®¿é—®
curl http://localhost:8000/health

# 4. æ£€æŸ¥é˜²ç«å¢™
sudo ufw status  # Ubuntu
sudo firewall-cmd --list-ports  # CentOS
```

**è§£å†³æ–¹æ¡ˆ**: å‚è§æ­¥éª¤ 8 çš„é˜²ç«å¢™é…ç½®ã€‚

---

### ğŸ”§ è¯Šæ–­å·¥å…·

ä½¿ç”¨è¯Šæ–­è„šæœ¬å¿«é€Ÿæ’æŸ¥é—®é¢˜ï¼š

```bash
# è¿è¡Œè¯Šæ–­è„šæœ¬ï¼ˆéœ€è¦é‡æ–°æ‰“åŒ…æ‰æœ‰ï¼‰
./scripts/diagnose_deployment.sh
```

æˆ–æ‰‹åŠ¨è¯Šæ–­ï¼š

```bash
# å®Œæ•´è¯Šæ–­å‘½ä»¤
echo "=== å®¹å™¨çŠ¶æ€ ==="
docker compose -f docker-compose.prod.yml ps

echo "=== API æ—¥å¿— ==="
docker compose -f docker-compose.prod.yml logs --tail=50 portrait-api

echo "=== ç¯å¢ƒå˜é‡ ==="
cat .env | grep -E "POSTGRES_|MYSQL_"

echo "=== å¥åº·æ£€æŸ¥ ==="
curl http://localhost:8000/health

echo "=== æ•°æ®åº“è¿æ¥ ==="
docker exec portrait-postgres pg_isready -U portrait
```

---

### âš™ï¸ ç¯å¢ƒå˜é‡è¯´æ˜

#### å¿…éœ€é…ç½®

å¦‚æœä½ æœ‰è‡ªå·±çš„MySQLæ•°æ®æº,éœ€è¦é…ç½®:

```env
# MySQL æºæ•°æ®åº“ (å¤–å‘¼ç³»ç»Ÿæ•°æ®)
MYSQL_HOST=your_mysql_host
MYSQL_PORT=3306
MYSQL_USER=readonly_user
MYSQL_PASSWORD=your_password
MYSQL_DB=outbound_saas
```

#### å¯é€‰é…ç½®

```env
# PostgreSQL (é»˜è®¤å³å¯)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=portrait
POSTGRES_PASSWORD=portrait123
POSTGRES_DB=portrait

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# è°ƒè¯•æ¨¡å¼
DEBUG=true  # å¼€å‘ç¯å¢ƒ: true, ç”Ÿäº§ç¯å¢ƒ: false
```

### ğŸ’¡ æç¤º

- **é¦–æ¬¡å¯åŠ¨**: æ•°æ®åº“åˆå§‹åŒ–å¯èƒ½éœ€è¦å‡ ç§’é’Ÿ
- **å¼€å‘æ¨¡å¼**: ä»£ç ä¿®æ”¹åä¼šè‡ªåŠ¨é‡è½½ (çƒ­æ›´æ–°)
- **æ—¥å¿—æŸ¥çœ‹**: å¼€å‘ç¯å¢ƒæ—¥å¿—ä¼šåŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶
- **æ•°æ®æŒä¹…åŒ–**: æ•°æ®åº“æ•°æ®å­˜å‚¨åœ¨ Docker volume ä¸­,åœæ­¢å®¹å™¨ä¸ä¼šä¸¢å¤±

---

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ç”»åƒç»´åº¦

1. **æ›´æ–°è§„åˆ™å¼•æ“** (`src/services/rule_engine_service.py`)
   - æ·»åŠ å…³é”®è¯åº“
   - å®ç°åˆ†ææ–¹æ³•
   - æ›´æ–° `AnalysisResult` æ•°æ®ç±»

2. **æ›´æ–°æ•°æ®æ¨¡å‹**
   - `call_record_enriched`: æ·»åŠ æ˜ç»†å­—æ®µ
   - `user_portrait_snapshot`: æ·»åŠ æ±‡æ€»å­—æ®µ
   - `task_portrait_summary`: æ·»åŠ æŠ¥è¡¨å­—æ®µ

3. **æ›´æ–°æœåŠ¡å±‚**
   - `etl_service.py`: æ›´æ–°æ‰¹é‡æ›´æ–° SQL
   - `portrait_service.py`: æ›´æ–°èšåˆæŸ¥è¯¢

4. **æ›´æ–° API**
   - `task.py`: æ›´æ–°å“åº”æ¨¡å‹å’ŒæŸ¥è¯¢

5. **æ›´æ–°å‰ç«¯**
   - `types/index.ts`: æ›´æ–°ç±»å‹å®šä¹‰
   - `PortraitDashboard.vue`: æ·»åŠ å±•ç¤ºç»„ä»¶

### æµ‹è¯•

```bash
# åç«¯æµ‹è¯•
pytest tests/

# å‰ç«¯æµ‹è¯•
cd web && npm run test
```

---

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-12-16)

- âœ… å®Œæˆå››ç»´åº¦ç”»åƒä½“ç³»ï¼ˆæ»¡æ„åº¦ã€é£é™©ã€æƒ…æ„Ÿã€æ²Ÿé€šæ„æ„¿ï¼‰
- âœ… å®ç°è§„åˆ™å¼•æ“åˆ†æï¼ˆæ›¿ä»£å¤§æ¨¡å‹ï¼Œæå‡æ€§èƒ½ï¼‰
- âœ… å‰ç«¯äº¤äº’ä¼˜åŒ–ï¼ˆåœºæ™¯ä¼˜å…ˆã€å‘¨æœŸç­›é€‰ã€æ˜ç»†ç­›é€‰ï¼‰
- âœ… è¶‹åŠ¿å›¾æ”¯æŒ4ç»´åº¦å±•ç¤º
- âœ… æ•°æ®é‡å»ºè„šæœ¬æ”¯æŒä¸€é”®æ¸…æ´—

---

## ç»´æŠ¤è”ç³»

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤äººå‘˜ã€‚
